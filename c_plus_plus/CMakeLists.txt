cmake_minimum_required(VERSION 4.0)
project(c_plus_plus)

set(CMAKE_CXX_STANDARD 20)

set(OUTPUT_FILE "${CMAKE_CURRENT_BINARY_DIR}/aoc_includes.gen.h")

# Start building the file content
set(FILE_CONTENT "// Auto-generated by CMake - DO NOT EDIT\n")
set(FILE_CONTENT "${FILE_CONTENT}// Advent of Code Includes\n")

# NOTE :: is it's 2051 and I am still using this project - IMPRESSIVE, but also update this number
foreach (YEAR RANGE 2020 2050)
    set(YEAR_INCLUDES "")

    # Loop through days 1-25
    foreach (DAY RANGE 1 25)
        set(DAY_STR "${DAY}")

        # Check if the day header file exists
        set(DAY_HEADER "${CMAKE_CURRENT_SOURCE_DIR}/${YEAR}/Day${DAY_STR}/Solution.h")

        if (EXISTS "${DAY_HEADER}")
            message(STATUS "Found ${YEAR}/Day${DAY_STR}.h")
            set(YEAR_INCLUDES "${YEAR_INCLUDES}#include \"${YEAR}/Day${DAY_STR}.h\"\n")
        endif ()
    endforeach ()

    if (NOT YEAR_INCLUDES STREQUAL "")
        set(FILE_CONTENT "${FILE_CONTENT}\n\n// =========== ${YEAR} ===========\n")
        set(FILE_CONTENT "${FILE_CONTENT}${YEAR_INCLUDES}")
    endif ()

endforeach ()

# Write the file
file(WRITE "${OUTPUT_FILE}" "${FILE_CONTENT}")

message(STATUS "Generated ${OUTPUT_FILE}")

add_executable(c_plus_plus main.cpp
        Core/day.h
        2024/Day1/input.txt
        2024/Day1/Solution.cpp
        2024/Day1/Solution.h)